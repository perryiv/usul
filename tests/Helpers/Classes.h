
////////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2019, Perry L Miller IV
//  All rights reserved.
//  MIT License: https://opensource.org/licenses/mit-license.html
//
////////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////
//
//  Helper classes.
//
////////////////////////////////////////////////////////////////////////////////

#ifndef _USUL_TEST_HELPER_CLASSES_H_
#define _USUL_TEST_HELPER_CLASSES_H_

#include "Usul/Base/Referenced.h"

namespace Helpers {


////////////////////////////////////////////////////////////////////////////////
//
//  Class used in the test code.
//
////////////////////////////////////////////////////////////////////////////////

class ClassA : public Usul::Base::Referenced
{
public:
  typedef Usul::Base::Referenced BaseClass;
  ClassA();
  virtual ~ClassA();
private:
  ClassA ( const ClassA & );
  ClassA &operator = ( const ClassA & );
};


////////////////////////////////////////////////////////////////////////////////
//
//  Class used in the test code.
//
////////////////////////////////////////////////////////////////////////////////

struct ClassB : public ClassA
{
  typedef ClassA BaseClass;
  ClassB();
  virtual ~ClassB();
private:
  ClassB ( const ClassB & );
  ClassB &operator = ( const ClassB & );
};


////////////////////////////////////////////////////////////////////////////////
//
//  Class used in the test code.
//
////////////////////////////////////////////////////////////////////////////////

struct ClassC : public ClassA
{
  typedef ClassA BaseClass;
  ClassC() : _b ( new ClassB() )
  {
    _b->ref();
  }
  virtual ~ClassC()
  {
    _b->unref();
  }
private:
  ClassC ( const ClassC & );
  ClassC &operator = ( const ClassC & );
  ClassB *_b;
};


} // namespace Helpers


#endif // _USUL_TEST_HELPER_CLASSES_H_
