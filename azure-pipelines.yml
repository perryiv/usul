################################################################################
#
#  Azure Pipelines configuration file.
#
#  Pipeline results are here:
#
#    https://dev.azure.com/perryiv/usul
#
#  Resources:
#
#    https://docs.microsoft.com/en-us/azure/devops/pipelines/process/container-phases
#    https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted
#    https://medium.com/@brentrobinson5/containerised-ci-cd-pipelines-with-azure-devops-74064c679f20
#    https://github.com/conan-io/conan-docker-tools/blob/master/azure-pipelines.yml
#
################################################################################

trigger:
- master

jobs:

- job: LinuxJob
  displayName: Linux Job
  strategy:
    matrix:
      gcc8:
        imageName: 'gcc:8'
      gcc9:
        imageName: 'gcc:9'
      gcc10:
        imageName: 'gcc:10'
  pool:
    vmImage: 'ubuntu-latest'
  container: $[variables['imageName']]

- job: MacJob
  displayName: Mac Job
  pool:
    vmImage: 'macOS-latest'

- job: WindowsJob
  displayName: Windows Job
  pool:
    vmImage: 'windows-latest'


#     mac:
#       imageName: 'macos-10.15'
#     windows:
#       imageName: 'vs2017-win2016'

steps:
- script: |
    pip3 install conan --upgrade
    pip3 install conan_package_tools
    conan user
  displayName: 'Configure conan'
