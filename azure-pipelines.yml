################################################################################
#
#  Azure Pipelines configuration file.
#
#  Pipeline results are here:
#
#    https://dev.azure.com/perryiv/usul
#
#  Resources:
#
#    https://docs.microsoft.com/en-us/azure/devops/pipelines/process/container-phases
#    https://docs.microsoft.com/en-us/azure/devops/pipelines/agents/hosted
#    https://medium.com/@brentrobinson5/containerised-ci-cd-pipelines-with-azure-devops-74064c679f20
#    https://github.com/conan-io/conan-docker-tools/blob/master/azure-pipelines.yml
#
################################################################################

trigger:
- master

jobs:

- job: LinuxJob
  displayName: Linux Job
  strategy:
    matrix:
      gcc8:
        imageName: 'gcc:8'
      gcc9:
        imageName: 'gcc:9'
      gcc10:
        imageName: 'gcc:10'
  pool:
    vmImage: 'ubuntu-latest'
  container: $[variables['imageName']]
  steps:
  - script: echo Hello from Linux
  - script: uname -a
  - script: gcc -v

- job: MacJob
  displayName: Mac Job
  pool:
    vmImage: 'macOS-latest'
  steps:
  - script: echo Hello from Mac
  - script: uname -a
  - script: clang -v

- job: WindowsJob
  displayName: Windows Job
  pool:
    vmImage: 'windows-latest'
  steps:
  - script: echo Hello from Windows
  - script: uname -a


# strategy:
#   matrix:
#     gcc8:
#       imageName: 'conanio/gcc8'
#     gcc9:
#       imageName: 'conanio/gcc9'
#     gcc10:
#       imageName: 'conanio/gcc10'
#     mac:
#       imageName: 'macos-10.15'
#     windows:
#       imageName: 'vs2017-win2016'



# steps:
# - script: echo This is script number 1
#   displayName: 'Script 1'
#
# - script: |
#     echo This is script number 2
#     echo This is the second line
#   displayName: 'Script 2'
