
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2019, Perry L Miller IV
//  All rights reserved.
//  MIT License: https://opensource.org/licenses/mit-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Integer counter.
//
///////////////////////////////////////////////////////////////////////////////

#pragma once

#include "Usul/Export.h"

#include <cstdint>


namespace Usul {
namespace Tools {


///////////////////////////////////////////////////////////////////////////////
//
//  Get the next 64-bit unsigned integer.
//
///////////////////////////////////////////////////////////////////////////////

struct USUL_EXPORT Counter
{
  typedef std::uint64_t Type;
  static Type getNext();
};


} // namespace Tools
} // namespace Usul


///////////////////////////////////////////////////////////////////////////////
//
//  Define counters as needed.
//
///////////////////////////////////////////////////////////////////////////////

#define USUL_TOOLS_MAKE_COUNTER(function_name,counter_type,initial_value) \
counter_type function_name() \
{ \
  static std::atomic < counter_type > _count ( initial_value ); \
  return _count++; \
}
